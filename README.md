# üìÅ  MyCloud - –û–±–ª–∞—á–Ω–æ–µ —Ö—Ä–∞–Ω–∏–ª–∏—â–µ —Ñ–∞–π–ª–æ–≤

<img src="./demo/1-intro/1-1-intro.gif" width="100%">

## 1. API –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è

### –û—Å–Ω–æ–≤–Ω—ã–µ —ç–Ω–¥–ø–æ–∏–Ω—Ç—ã

#### –ê—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏—è

| –ú–µ—Ç–æ–¥ | –ü—É—Ç—å                   | –û–ø–∏—Å–∞–Ω–∏–µ                          | –õ–∏–º–∏—Ç—ã               |
|-------|------------------------|-----------------------------------|----------------------|
| POST  | `/api/auth/register/`    | –†–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è –Ω–æ–≤–æ–≥–æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è   | 50 –∑–∞–ø—Ä–æ—Å–æ–≤/—á–∞—Å      |
| POST  | `/api/auth/login/`       | –í—Ö–æ–¥ –≤ —Å–∏—Å—Ç–µ–º—É                   | 50 –∑–∞–ø—Ä–æ—Å–æ–≤/—á–∞—Å      |
| POST  | `/api/auth/logout/`      | –í—ã—Ö–æ–¥ –∏–∑ —Å–∏—Å—Ç–µ–º—ã                 | –ë–µ–∑ –ª–∏–º–∏—Ç–æ–≤          |
| GET   | `/api/auth/users/me/`    | –ü–æ–ª—É—á–µ–Ω–∏–µ –¥–∞–Ω–Ω—ã—Ö —Ç–µ–∫—É—â–µ–≥–æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è | 1000 –∑–∞–ø—Ä–æ—Å–æ–≤/—á–∞—Å |

#### –†–∞–±–æ—Ç–∞ —Å —Ñ–∞–π–ª–∞–º–∏

| –ú–µ—Ç–æ–¥ | –ü—É—Ç—å                          | –û–ø–∏—Å–∞–Ω–∏–µ                          | –õ–∏–º–∏—Ç—ã               |
|-------|-------------------------------|-----------------------------------|----------------------|
| GET   | `/api/storage/files/`           | –ü–æ–ª—É—á–µ–Ω–∏–µ —Å–ø–∏—Å–∫–∞ —Ñ–∞–π–ª–æ–≤           | 100 –∑–∞–ø—Ä–æ—Å–æ–≤/–º–∏–Ω     |
| POST  | `/api/storage/files/`           | –ó–∞–≥—Ä—É–∑–∫–∞ –Ω–æ–≤–æ–≥–æ —Ñ–∞–π–ª–∞             | –ú–∞–∫—Å. —Ä–∞–∑–º–µ—Ä 2GB     |
| GET   | `/api/storage/files/{id}/`      | –ü–æ–ª—É—á–µ–Ω–∏–µ –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–∏ –æ —Ñ–∞–π–ª–µ      | 100 –∑–∞–ø—Ä–æ—Å–æ–≤/–º–∏–Ω     |
| DELETE| `/api/storage/files/{id}/`      | –£–¥–∞–ª–µ–Ω–∏–µ —Ñ–∞–π–ª–∞                    | 50 –∑–∞–ø—Ä–æ—Å–æ–≤/—á–∞—Å      |
| GET   | `/api/storage/files/{id}/download/` | –°–∫–∞—á–∏–≤–∞–Ω–∏–µ —Ñ–∞–π–ª–∞              | 50 –∑–∞–ø—Ä–æ—Å–æ–≤/—á–∞—Å      |
| GET   | `/api/storage/shared/{link}/`   | –°–∫–∞—á–∏–≤–∞–Ω–∏–µ –ø–æ –ø—É–±–ª–∏—á–Ω–æ–π —Å—Å—ã–ª–∫–µ    | 100 –∑–∞–ø—Ä–æ—Å–æ–≤/—á–∞—Å     |

#### –ê–¥–º–∏–Ω–∏—Å—Ç—Ä–∏—Ä–æ–≤–∞–Ω–∏–µ

| –ú–µ—Ç–æ–¥ | –ü—É—Ç—å                   | –û–ø–∏—Å–∞–Ω–∏–µ                          | –õ–∏–º–∏—Ç—ã               |
|-------|------------------------|-----------------------------------|----------------------|
| GET   | `/api/auth/users/`       | –°–ø–∏—Å–æ–∫ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π (—Ç–æ–ª—å–∫–æ –∞–¥–º–∏–Ω) | 100 –∑–∞–ø—Ä–æ—Å–æ–≤/—á–∞—Å  |
| POST  | `/api/auth/admin/create/`| –°–æ–∑–¥–∞–Ω–∏–µ –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä–∞           | 10 –∑–∞–ø—Ä–æ—Å–æ–≤/—á–∞—Å      |

### –õ–∏–º–∏—Ç—ã API

1. **–†–∞–∑–º–µ—Ä —Ñ–∞–π–ª–æ–≤**:
   - –ú–∞–∫—Å–∏–º–∞–ª—å–Ω—ã–π —Ä–∞–∑–º–µ—Ä –∑–∞–≥—Ä—É–∂–∞–µ–º–æ–≥–æ —Ñ–∞–π–ª–∞: 2GB
   - –ú–∏–Ω–∏–º–∞–ª—å–Ω—ã–π —Ä–∞–∑–º–µ—Ä: 1KB

2. **–ö–≤–æ—Ç—ã —Ö—Ä–∞–Ω–∏–ª–∏—â–∞**:
   - –û–±—ã—á–Ω—ã–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–∏: 5GB –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é
   - –ê–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä—ã: 10GB –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é
   - –ú–∏–Ω–∏–º–∞–ª—å–Ω—ã–π –ª–∏–º–∏—Ç: 1MB
   - –ú–∞–∫—Å–∏–º–∞–ª—å–Ω—ã–π –ª–∏–º–∏—Ç: 100GB

3. **–û–≥—Ä–∞–Ω–∏—á–µ–Ω–∏—è –∑–∞–ø—Ä–æ—Å–æ–≤**:
   - –ê–Ω–æ–Ω–∏–º–Ω—ã–µ –∑–∞–ø—Ä–æ—Å—ã: 100/–¥–µ–Ω—å
   - –ê–≤—Ç–æ—Ä–∏–∑–æ–≤–∞–Ω–Ω—ã–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–∏: 500000/—á–∞—Å
   - –†–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è/–ª–æ–≥–∏–Ω: 5000/—á–∞—Å

4. **–û–≥—Ä–∞–Ω–∏—á–µ–Ω–∏—è –¥–ª—è —Ñ–∞–π–ª–æ–≤**:
   - –ú–∞–∫—Å–∏–º–∞–ª—å–Ω–æ–µ –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –ø–æ–ª–µ–π –≤ —Ñ–æ—Ä–º–µ: 1000
   - –ú–∞–∫—Å–∏–º–∞–ª—å–Ω–æ–µ –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ —Ñ–∞–π–ª–æ–≤ –∑–∞ —Ä–∞–∑: 20

### –ò–Ω—Ç–µ—Ä–∞–∫—Ç–∏–≤–Ω–∞—è –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è

1. **Swagger UI** - –∏–Ω—Ç–µ—Ä–∞–∫—Ç–∏–≤–Ω—ã–π –ø—Ä–æ—Å–º–æ—Ç—Ä –∏ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ API:
   - URL: `/api/docs/`

2. **ReDoc** - –∞–ª—å—Ç–µ—Ä–Ω–∞—Ç–∏–≤–Ω–æ–µ –ø—Ä–µ–¥—Å—Ç–∞–≤–ª–µ–Ω–∏–µ –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏–∏:
   - URL: `/api/redoc/`

### –î–æ—Å—Ç—É–ø –∫ —Å—Ö–µ–º–µ API

–î–ª—è —Ä–∞–∑—Ä–∞–±–æ—Ç—á–∏–∫–æ–≤ –¥–æ—Å—Ç—É–ø–Ω–∞ raw-—Å—Ö–µ–º–∞ API –≤ —Ñ–æ—Ä–º–∞—Ç–µ OpenAPI:

- URL: `/api/schema/`
  - –§–æ—Ä–º–∞—Ç: `YAML/JSON`

## 2. –û—Å–æ–±–µ–Ω–Ω–æ—Å—Ç–∏ —Ä–∞–±–æ—Ç—ã –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è

### 2.1. –†–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è –∏ –≤—Ö–æ–¥ –≤ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ

- –í—ã–±–æ—Ä —Ä–∞–∑–¥–µ–ª–∞ "–†–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è" –∏ —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è. –ü–æ—Å–ª–µ —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è –ø–µ—Ä–µ–±—Ä–æ—Å–∏—Ç –≤ —Ö—Ä–∞–Ω–∏–ª–∏—â–µ
- –í—Ö–æ–¥ –ø–æ –ª–æ–≥–∏–Ω—É –∏ –ø–∞—Ä–æ–ª—é —á–µ—Ä–µ–∑ —Ä–∞–∑–¥–µ–ª "–í—Ö–æ–¥"
- ```accounts_customuser``` - —Ç–∞–±–ª–∏—Ü–∞ –∏–∑ –ë–î, —Ñ–∏–∫—Å–∏—Ä—É—é—â–∞—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π –∏ –∞–¥–º–∏–Ω–æ–≤

<img src="./demo/2-functionality/1-auth.gif" width="100%">

### 2.2. –†–∞–±–æ—Ç–∞ —Å —Ö—Ä–∞–Ω–∏–ª–∏—â–µ–º

- –ü–µ—Ä–µ—Ç–∞—Å–∫–∏–≤–∞–Ω–∏–µ —Ñ–∞–π–ª–æ–≤ –≤ –æ–±–ª–∞—Å—Ç—å (Drag and Drop) –∏–ª–∏ –≤—ã–±–æ—Ä —Ñ–∞–π–ª–∞ (–∫–Ω–æ–ø–∫–∞ "–í—ã–±—Ä–∞—Ç—å —Ñ–∞–π–ª")
- –ù–∞–ø–∏—Å–∞–Ω–∏–µ –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏—è –∫ —Ñ–∞–π–ª—É (–Ω–µ–æ–±—è–∑–∞—Ç–µ–ª—å–Ω–æ) –∏ –∑–∞–≥—Ä—É–∑–∫–∞ —Ñ–∞–π–ª–∞ –≤ —Ö—Ä–∞–Ω–∏–ª–∏—â–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è. –ö–æ–º–º–µ–Ω—Ç–∞—Ä–∏–π –º–æ–∂–Ω–æ —Ä–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞—Ç—å
- –°–∫–∞—á–∏–≤–∞–Ω–∏–µ —Ñ–∞–π–ª–∞, –µ–≥–æ –ø–µ—Ä–µ–¥–∞—á–∞ –ø–æ —Å—Å—ã–ª–∫–µ –∏ —É–¥–∞–ª–µ–Ω–∏–µ –∏–∑ —Ö—Ä–∞–Ω–∏–ª–∏—â–∞ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
- –°—Ç–∞–Ω–¥–∞—Ä—Ç–Ω—ã–π –º–∞–∫—Å–∏–º–∞–ª—å–Ω—ã–π —Ä–∞–∑–º–µ—Ä —Ö—Ä–∞–Ω–∏–ª–∏—â–∞ –¥–ª—è –∞–¥–º–∏–Ω–æ–≤ –∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π –∑–∞–¥–∞–µ—Ç—Å—è –≤ ```settings.py``` (—Ä–∞–∑–¥–µ–ª "Storage Quotas"). –ü—Ä–∏ –≤–æ–∑–Ω–∏–∫–Ω–æ–≤–µ–Ω–∏–∏ –¥–æ–ª–∂–Ω–æ–π –ø–æ—Ç—Ä–µ–±–Ω–æ—Å—Ç–∏ –∞–¥–º–∏–Ω –º–æ–∂–µ—Ç —É–≤–µ–ª–∏—á–∏—Ç—å/—É–º–µ–Ω—å—à–∏—Ç—å —Ä–∞–∑–º–µ—Ä —Ö—Ä–∞–Ω–∏–ª–∏—â–∞ –¥–ª—è –∫–æ–Ω–∫—Ä–µ—Ç–Ω–æ–≥–æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
- ```storage_userfile``` - —Ç–∞–±–ª–∏—Ü–∞ –∏–∑ –ë–î, —Ñ–∏–∫—Å–∏—Ä—É—é—â–∞—è —Ñ–∞–π–ª—ã –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π –∏ –∞–¥–º–∏–Ω–æ–≤

<img src="./demo/2-functionality/2-storage.gif" width="100%">

### 2.3. –†–∞–±–æ—Ç–∞ —Å –ø–∞–Ω–µ–ª—å—é –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä–∞

- –ê–¥–º–∏–Ω –≤–ø—Ä–∞–≤–µ —Å–æ–∑–¥–∞—Ç—å –Ω–æ–≤–æ–≥–æ –∞–¥–º–∏–Ω–∞ –∏ –∏–∑–º–µ–Ω–∏—Ç—å —Å–æ–±—Å—Ç–≤–µ–Ω–Ω—ã–π –ø–∞—Ä–æ–ª—å
- –ê–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä –º–æ–∂–µ—Ç –¥–µ–∞–∫—Ç–∏–≤–∏—Ä–æ–≤–∞—Ç—å –æ–±—ã—á–Ω–æ–≥–æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è, –∏–∑–º–µ–Ω–∏—Ç—å –µ–≥–æ –ø–∞—Ä–æ–ª—å –∏ –æ–±—ä–µ–º —Ö—Ä–∞–Ω–∏–ª–∏—â–∞ –≤ –ì–ë, —É–¥–∞–ª–∏—Ç—å –µ–≥–æ –∏–∑ –ë–î
- –í–º–µ—Å—Ç–µ —Å –∞–¥–º–∏–Ω-–ø–∞–Ω–µ–ª—å—é –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä—ã –±—É–¥—É—Ç –∏–º–µ—Ç—å —Å–æ–±—Å—Ç–≤–µ–Ω–Ω–æ–µ —Ö—Ä–∞–Ω–∏–ª–∏—â–µ –¥–ª—è —Ö—Ä–∞–Ω–µ–Ω–∏—è —Ä–∞–±–æ—á–∏—Ö —Ñ–∞–π–ª–æ–≤ (—Ä—É–∫–æ–≤–æ–¥—Å—Ç–≤–æ –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä–∞, —à–∞–±–ª–æ–Ω—ã –æ—Ç–≤–µ—Ç–æ–≤ –Ω–∞ –≤–æ–ø—Ä–æ—Å—ã –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π –∏ —Ç.–ø.). –ü—Ä–∏–Ω—Ü–∏–ø —Ä–∞–±–æ—Ç—ã —Ö—Ä–∞–Ω–∏–ª–∏—â–∞ —Ç–∞–∫–æ–π –∂–µ –∫–∞–∫ —É –æ–±—ã—á–Ω—ã—Ö –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è

<img src="./demo/2-functionality/3-admin-panel.gif" width="100%">

## 3. –ò–Ω—Å—Ç—Ä—É–∫—Ü–∏—è –ø–æ –ª–æ–∫–∞–ª—å–Ω–æ–º—É –∑–∞–ø—É—Å–∫—É –ø—Ä–æ–µ–∫—Ç–∞

### 3.1. –ö–ª–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏—è

* –ö–ª–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏—è:

```bash
git clone https://github.com/maxter9595/MyCloudApp.git
cd MyCloudApp
```

<img src="./demo/3-local-setup/1-git-clone.gif" width="100%">

### 3.2. –ù–∞—Å—Ç—Ä–æ–π–∫–∞ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã—Ö –æ–∫—Ä—É–∂–µ–Ω–∏—è

* –ö–æ–ø–∏—Ä–æ–≤–∞–Ω–∏–µ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã—Ö –æ–∫—Ä—É–∂–µ–Ω–∏—è –∏–∑ env_example:

```bash
cp backend/.env_example backend/.env
cp frontend/.env_example frontend/.env
```

<img src="./demo/3-local-setup/2-env-setup.gif" width="100%">

### 3.3. –£—Å—Ç–∞–Ω–æ–≤–∫–∞ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π –∏ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ —Ñ—Ä–æ–Ω—Ç–µ–Ω–¥–∞

* –°–±–æ—Ä–∫–∞ —Ñ—Ä–æ–Ω—Ç–µ–Ω–¥–∞ –∏ –µ–≥–æ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ:

```bash
cd frontend
npm install
npm run build
npm test
cd ..
```

<img src="./demo/3-local-setup/3-frontend.gif" width="100%">

### 3.4. –ó–∞–ø—É—Å–∫ Docker

* –ó–∞–ø—É—Å–∫ Docker Desktop. –ï–≥–æ –Ω–∞–ª–∏—á–∏–µ –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ

* –°–±–æ—Ä–∫–∞ –∏ –∑–∞–ø—É—Å–∫ Docker:

```bash
docker-compose up --build -d
```

<img src="./demo/3-local-setup/4-docker.gif" width="100%">

### 3.5. –ù–∞—Å—Ç—Ä–æ–π–∫–∞ –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä–∞ –∏ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –±—ç–∫–µ–Ω–¥–∞

* –°–æ–∑–¥–∞–Ω–∏–µ –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä–∞:

```bash
docker-compose ps
docker-compose exec backend python manage.py createsuperuser
```

* –ü—Ä–∏–º–µ—Ä –¥–∞–Ω–Ω—ã—Ö –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä–∞:

```
–õ–æ–≥–∏–Ω: admin
Email: admin@mail.ru
–ü–∞—Ä–æ–ª—å: Admintest3273!
```

* –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –±—ç–∫–µ–Ω–¥–∞:

```bash
docker-compose exec backend python manage.py test
```

<img src="./demo/3-local-setup/5-admin.gif" width="100%">

### 3.6. –ü–æ–¥–∫–ª—é—á–µ–Ω–∏–µ –∫ –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–∏–≤–Ω–æ–π –ø–∞–Ω–µ–ª–∏ –°–£–ë–î PostgreSQL

* –°—Å—ã–ª–∫–∞ –¥–ª—è –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è: [http://localhost:5050/](http://localhost:5050/)

* –î–∞–Ω–Ω—ã–µ –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä–∞ –ë–î –¥–ª—è –≤—Ö–æ–¥–∞ –≤ –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–∏–≤–Ω—É—é –ø–∞–Ω–µ–ª—å PostgreSQL:

```
–ü–æ—á—Ç–∞: admin@example.com
–ü–∞—Ä–æ–ª—å: admin123
```

* `Register...` ‚ûù `Server...`. –î–∞–Ω–Ω—ã–µ —Å–æ–µ–¥–∏–Ω–µ–Ω–∏—è:

```
Host: db
Port: 5432
Maintenance database: my_database
Username: postgres
Password: postgres
```

* –ö–ª—é—á–µ–≤—ã–µ —Ç–∞–±–ª–∏—Ü—ã –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è –∏–∑ –ë–î - `accounts_customuser` –∏ `storage_userfile`

<img src="./demo/3-local-setup/6-PostgreSQL.gif" width="100%">

### 3.7. –û—Ç–∫—Ä—ã—Ç–∏–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è

* –°—Å—ã–ª–∫–∞ –¥–ª—è –æ—Ç–∫—Ä—ã—Ç–∏—è –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è: [http://localhost:3000/](http://localhost:3000/)

* –í–æ–∑–º–æ–∂–Ω—ã–µ –ø—Ä–æ–±–ª–µ–º—ã:
   - –û—à–∏–±–∫–∏ –ø–æ—Ä—Ç–æ–≤: —É–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ –∑–∞–¥–µ–π—Å—Ç–≤–æ–≤–∞–Ω–Ω—ã–µ –≤ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–∏ –ø–æ—Ä—Ç—ã –Ω–µ –∑–∞–Ω—è—Ç—ã
   - PGAdmin –Ω–µ –ø–æ–¥–∫–ª—é—á–∞–µ—Ç—Å—è –∫ –ë–î: –ø—Ä–æ–≤–µ—Ä—å—Ç–µ, —á—Ç–æ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä `db` –∑–∞–ø—É—â–µ–Ω (`docker-compose ps`)
   - –ü—Ä–æ–±–ª–µ–º—ã —Å –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç—è–º–∏: —É–¥–∞–ª–∏—Ç–µ –ø–∞–ø–∫–∏ `node_modules/` –∏ `venv/`, –∑–∞—Ç–µ–º –ø–µ—Ä–µ—Å–æ–±–µ—Ä–∏—Ç–µ –ø—Ä–æ–µ–∫—Ç

<img src="./demo/3-local-setup/7-app-check.gif" width="100%">

## 4. –ò–Ω—Å—Ç—Ä—É–∫—Ü–∏—è –ø–æ –¥–µ–ø–ª–æ—é –ø—Ä–æ–µ–∫—Ç–∞ –Ω–∞ —Å–µ—Ä–≤–µ—Ä–µ

### 4.1. –ü–æ–∫—É–ø–∫–∞ —Å–µ—Ä–≤–µ—Ä–∞ –∏ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏–µ –∫ –Ω–µ–º—É

* –†–µ–≥.RU - –û–±–ª–∞—á–Ω—ã–π —Å–µ—Ä–≤–µ—Ä —Å –ø—Ä–µ–¥—É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–Ω—ã–º Docker: [https://www.reg.ru/cloud/docker](https://www.reg.ru/cloud/docker)

* –ü—Ä–∏–º–µ—Ä IP-–∞–¥—Ä–µ—Å–∞ –∏ –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –æ —Å–µ—Ä–≤–µ—Ä–µ –¥–ª—è –ø–æ–∫—É–ø–∫–∏:

```
- –ü—Ä–µ–¥—É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–Ω—ã–π Docker: –¥–∞ 
- –û–±—Ä–∞–∑: Ubuntu
- –¢–∞—Ä–∏—Ñ—ã –∏ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏: –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω—ã–π
- –¢–∞—Ä–∏—Ñ: HP C2-M2-D40
- –†–µ–≥–∏–æ–Ω —Ä–∞–∑–º–µ—â–µ–Ω–∏—è: –ú–æ—Å–∫–≤–∞
- –ü–ª–∞–≤–∞—é—â–∏–π (–ø—É–±–ª–∏—á–Ω—ã–π) IP-–∞–¥—Ä–µ—Å: –¥–∞
- –†–µ–∑–µ—Ä–≤–Ω–æ–µ –∫–æ–ø–∏—Ä–æ–≤–∞–Ω–∏–µ: –¥–∞
```

* –í—Ö–æ–¥ –Ω–∞ —Å–µ—Ä–≤–µ—Ä –ø–æ—Å–ª–µ –µ–≥–æ –ø—Ä–∏–æ–±—Ä–µ—Ç–µ–Ω–∏—è:

```bash
# –í—Ö–æ–¥–∏–º –ø–æ IP –∏ –ø–∞—Ä–æ–ª—é, –≤—ã–¥–∞–Ω–Ω—ã–º–∏ –Ω–∞ –ø–æ—á—Ç—É
ssh root@95.163.220.37
```

<img src="./demo/4-server-deploy/1-server-entrance.gif" width="100%">

### 4.2. –ü–æ–¥–≥–æ—Ç–æ–≤–∫–∞ —Å–µ—Ä–≤–µ—Ä–∞ –¥–ª—è –¥–µ–ø–ª–æ—è

* –°–æ–∑–¥–∞–Ω–∏–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è –∏ –¥–æ–±–∞–≤–ª–µ–Ω–∏–µ –µ–≥–æ –≤ –≥—Ä—É–ø–ø—É sudo:

```bash
adduser myclouduser
usermod -aG sudo myclouduser
```

* –£—Å—Ç–∞–Ω–æ–≤–∫–∞ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π:

```bash
apt update && apt upgrade -y
apt install -y git nginx ufw
```

* –ù–∞—Å—Ç—Ä–æ–π–∫–∞ firewall:

```bash
sudo ufw allow 3000
sudo ufw allow 8000
sudo ufw allow 5050
ufw allow 22
ufw allow 80
ufw enable
```

* –ó–∞–ø—É—Å–∫ Docker:

```bash
# –ù–∞ –≤—ã–±—Ä–∞–Ω–Ω–æ–º —Å–µ—Ä–≤–µ—Ä–µ Docker —É–∂–µ –ø—Ä–µ–¥—É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω
systemctl enable docker
systemctl start docker
```

* –î–æ–±–∞–≤–ª–µ–Ω–∏–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è –≤ –≥—Ä—É–ø–ø—É docker –∏ –µ–≥–æ –ø–µ—Ä–µ–ø–æ–¥–∫–ª—é—á–µ–Ω–∏–µ –Ω–∞ —Å–µ—Ä–≤–µ—Ä –¥–ª—è —É—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏—è –ø—Ä–∞–≤:

```bash
usermod -aG docker myclouduser
exit

# –í—Ö–æ–¥–∏–º –ø–æ –ø–∞—Ä–æ–ª—é, –∑–∞–¥–∞–Ω–Ω–æ–º—É –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—é —á–µ—Ä–µ–∑ adduser myclouduser
ssh myclouduser@95.163.220.37
```

<img src="./demo/4-server-deploy/2-server-preparation.gif" width="100%">

### 4.3. –ö–ª–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏—è. –ü–æ–¥–≥–æ—Ç–æ–≤–∫–∞ –±—ç–∫–µ–Ω–¥–∞ –¥–ª—è –¥–µ–ø–ª–æ—è

* –ö–ª–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏—è:

```bash
git clone https://github.com/maxter9595/MyCloudApp.git
cd MyCloudApp
```

* –ù–∞—Å—Ç—Ä–æ–π–∫–∞ ```entrypoint.sh``` –≤ —Ä–æ–ª–∏ –∏—Å–ø–æ–ª–Ω—è–µ–º–æ–≥–æ —Ñ–∞–π–ª–∞:

```bash
cd backend
chmod +x entrypoint.sh
cd ..
```

* –†–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã—Ö –æ–∫—Ä—É–∂–µ–Ω–∏—è –¥–ª—è –±—ç–∫–µ–Ω–¥–∞:

```bash
cp backend/.env_example backend/.env
sudo nano backend/.env
```

```bash
----- backend/.env -----
# –î–æ–±–∞–≤–ª—è–µ–º my-ip-address (–Ω–∞–ø—Ä–∏–º–µ—Ä, 95.163.220.37)
ALLOWED_HOSTS=127.0.0.1,localhost,backend,mycloudapp.local,my-ip-address

....

# –î–æ–±–∞–≤–ª—è–µ–º http://my-ip-address (–Ω–∞–ø—Ä–∏–º–µ—Ä, http://95.163.220.37)
CORS_ALLOWED_ORIGINS=http://my-ip-address,http://localhost:3000,http://127.0.0.1:3000,http://frontend:80
CSRF_TRUSTED_ORIGINS=http://my-ip-address,http://localhost:3000,http://127.0.0.1:3000,http://frontend:80
----- backend/.env -----
```

<img src="./demo/4-server-deploy/3-git-clone-and-backend.gif" width="100%">

### 4.4. –ü–æ–¥–≥–æ—Ç–æ–≤–∫–∞ —Ñ—Ä–æ–Ω—Ç–µ–Ω–¥–∞ –¥–ª—è –¥–µ–ø–ª–æ—è

* –†–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã—Ö –æ–∫—Ä—É–∂–µ–Ω–∏—è –¥–ª—è —Ñ—Ä–æ–Ω—Ç–µ–Ω–¥–∞:

```bash
cp frontend/.env_example frontend/.env
sudo nano frontend/.env
```

```
----- backend/.env -----
# –î–æ–±–∞–≤–ª—è–µ–º —Å–µ—Ä–≤–µ—Ä–Ω—ã–∏ÃÜ IP –≤–º–µ—Å—Ç–æ my-ip-address
REACT_APP_API_BASE_URL=http://my-ip-address:8000/api
----- backend/.env -----
```

* –£—Å—Ç–∞–Ω–æ–≤–∫–∞ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π –¥–ª—è —Ñ—Ä–æ–Ω—Ç–µ–Ω–¥–∞:

```bash
curl -fsSL https://deb.nodesource.com/setup_18.x | sudo -E bash -
sudo apt-get install -y nodejs
```

* –°–±–æ—Ä–∫–∞ –ø—Ä–æ–µ–∫—Ç–∞:

```bash
cd frontend
npm install
npm run build
```

* –£—Å—Ç–∞–Ω–æ–≤–∫–∞ –ø—Ä–∞–≤ –Ω–∞ —Ä–æ–¥–∏—Ç–µ–ª—å—Å–∫–∏–µ –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏–∏ –∏ —á—Ç–µ–Ω–∏–µ —Ñ–∞–π–ª–æ–≤:

```bash
sudo chmod o+x /home/myclouduser
sudo chmod o+x /home/myclouduser/MyCloudApp
sudo chmod o+x /home/myclouduser/MyCloudApp/frontend
sudo chmod o+x /home/myclouduser/MyCloudApp/frontend/build
```

* –°–º–µ–Ω–∞ –≥—Ä—É–ø–ø—ã –Ω–∞ www-data:

```bash
sudo chmod -R o+r /home/myclouduser/MyCloudApp/frontend/build
sudo chown -R myclouduser:www-data /home/myclouduser/MyCloudApp/frontend/build
sudo chmod -R 750 /home/myclouduser/MyCloudApp/frontend/build
```

<img src="./demo/4-server-deploy/4-frontend.gif" width="100%">

### 4.5. –ó–∞–ø—É—Å–∫ Docker. –°–æ–∑–¥–∞–Ω–∏–µ –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä–∞

* –°–±–æ—Ä–∫–∞ –∏ –∑–∞–ø—É—Å–∫ Docker:

```bash
cd ~/MyCloudApp
docker compose build
docker compose up -d
```

<img src="./demo/4-server-deploy/5-1-docker.gif" width="100%">

* –ü—Ä–æ–≤–µ—Ä–∫–∞ –Ω–∞–ª–∏—á–∏—è Docker –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–æ–≤ –∏ —Å–æ–∑–¥–∞–Ω–∏–µ –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä–∞:

```bash
docker compose ps
docker compose exec backend python manage.py createsuperuser
```

* –î–∞–Ω–Ω—ã–µ –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä–∞ (–ø—Ä–∏–º–µ—Ä):

```
–õ–æ–≥–∏–Ω: admin
Email: admin@mail.ru
–ü–∞—Ä–æ–ª—å: Admintest3273!
```

<img src="./demo/4-server-deploy/5-2-admin.gif" width="100%">

### 4.6. –ù–∞—Å—Ç—Ä–æ–π–∫–∞ Nginx

* –ù–∞—Å—Ç—Ä–æ–π–∫–∞ ```nginx/sites-available```:

```bash
sudo cp .nginx-site_example /etc/nginx/sites-available/mycloud
sudo nano /etc/nginx/sites-available/mycloud
```

```bash
----- sites-available/mycloud -----
# –ö–æ—Ä—Ä–µ–∫—Ç–∏—Ä–µ–º my-ip-address –ø–æ–¥ –∫–æ–Ω–∫—Ä–µ—Ç–Ω—ã–π IP-–∞–¥—Ä–µ—Å (–Ω–∞–ø—Ä–∏–º–µ—Ä, 95.163.220.37)
server {
    listen 80;
    server_name my-ip-address;
    ... 
----- sites-available/mycloud -----
```

* –ù–∞—Å—Ç—Ä–æ–π–∫–∞ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏ Nginx:

```bash
sudo nano /etc/nginx/nginx.conf
```

```bash
---------- nginx.conf ----------
# –î–æ–±–∞–≤–ª–µ–Ω–∏–µ client_max_body_size –≤ http
http {
    client_max_body_size 2G; 
    ...
}
---------- nginx.conf ----------
```

* –ó–∞–≥—Ä—É–∑–∫–∞ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏ Nginx:

```bash
sudo ln -s /etc/nginx/sites-available/mycloud /etc/nginx/sites-enabled/
sudo nginx -t
sudo systemctl restart nginx
```

<img src="./demo/4-server-deploy/6-nginx.gif" width="100%">

### 4.7. –û—Ç–∫—Ä—ã—Ç–∏–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è

* –î–æ—Å—Ç—É–ø –∫ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—é:
   - –§—Ä–æ–Ω—Ç–µ–Ω–¥: [http://95.163.220.37/](http://95.163.220.37/)
   - –ë—ç–∫–µ–Ω–¥: [http://95.163.220.37:8000/api/docs/](http://95.163.220.37:8000/api/docs/)
   - –ê–¥–º–∏–Ω–∫–∞ PostgreSQL (—á–µ—Ä–µ–∑ PGAdmin): [http://95.163.220.37:5050/](http://95.163.220.37:5050/)

* –î–∞–Ω–Ω—ã–µ –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä–∞ –ë–î –¥–ª—è –≤—Ö–æ–¥–∞ –≤ –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–∏–≤–Ω—É—é –ø–∞–Ω–µ–ª—å –°–£–ë–î PostgreSQL:

```
–ü–æ—á—Ç–∞: admin@example.com
–ü–∞—Ä–æ–ª—å: admin123
```

* `Register...` ‚ûù `Server...`. –î–∞–Ω–Ω—ã–µ —Å–æ–µ–¥–∏–Ω–µ–Ω–∏—è –∫ –ë–î –≤ –°–£–ë–î PostgreSQL:

```
Host: db
Port: 5432
Maintenance database: my_database
Username: postgres
Password: postgres
```

<img src="./demo/4-server-deploy/7-app-check.gif" width="100%">

## 5. –ù–∞—Å—Ç—Ä–æ–π–∫–∞ –∞–≤—Ç–æ–¥–µ–ø–ª–æ—è –ø—Ä–æ–µ–∫—Ç–∞ (CI/CD)

### 5.1. –ì–µ–Ω–µ—Ä–∞—Ü–∏—è SSH-–∫–ª—é—á–∞ –Ω–∞ –ª–æ–∫–∞–ª—å–Ω–æ–º –ü–ö

* –ì–µ–Ω–µ—Ä–∞—Ü–∏—è SSH-–∫–ª—é—á–∞ –Ω–∞ –ª–æ–∫–∞–ª—å–Ω–æ–º –ü–ö:

```bash
ssh-keygen -t ed25519 -C "max.t95@bk.ru"
```

* –í—ã–≤–æ–¥ SSH-–∫–ª—é—á–∞ –∏–∑ –ª–æ–∫–∞–ª—å–Ω–æ–≥–æ –ü–ö –¥–ª—è –∫–æ–ø–∏—Ä–æ–≤–∞–Ω–∏—è:

```bash
type $env:USERPROFILE\.ssh\id_ed25519.pub
```

```bash
# –ö–æ–ø–∏—Ä—É–µ–º SSH-–∫–ª—é—á
ssh-ed25519 AAAA...jU max.t95@bk.ru
```

<img src="./demo/5-ci-cd/1-local-PC-key-gen.png" width="100%">

### 5.2. –ì–µ–Ω–µ—Ä–∞—Ü–∏—è SSH-–∫–ª—é—á–∞ –Ω–∞ —Å–µ—Ä–≤–µ—Ä–µ

* –í—Ö–æ–¥ –Ω–∞ —Å–µ—Ä–≤–µ—Ä:

```bash
ssh myclouduser@95.163.220.37
```

* –ì–µ–Ω–µ—Ä–∞—Ü–∏—è SSH-–∫–ª—é—á–∞ –Ω–∞ —Å–µ—Ä–≤–µ—Ä–µ:

```bash
ssh-keygen -t ed25519 -C "max.t95@bk.ru"
```

* –í—ã–≤–æ–¥ SSH-–∫–ª—é—á–∞ –∏–∑ —Å–µ—Ä–≤–µ—Ä–∞ –¥–ª—è –ø—Ä–æ—Å–º–æ—Ç—Ä–∞:


```bash
ssh-keygen -y -f ~/.ssh/id_ed25519
```

```bash
# SSH-–∫–ª—é—á –∏–∑ —Å–µ—Ä–≤–µ—Ä–∞ –ø–æ–Ω–∞–¥–æ–±–∏—Ç—Å—è –¥–ª—è —É–¥–∞–ª–µ–Ω–Ω–æ–≥–æ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è –∫ GitHub
ssh-ed25519 AAAA...rx max.t95@bk.ru
```

<img src="./demo/5-ci-cd/2-server-key-gen.png" width="100%">

### 5.3. –î–æ–±–∞–≤–ª–µ–Ω–∏–µ SSH-–∫–ª—é—á–µ–π –∏–∑ –ª–æ–∫–∞–ª—å–Ω–æ–≥–æ –ü–ö –∏ —Å–µ—Ä–≤–µ—Ä–∞ –≤ —Å–ø–∏—Å–æ–∫ –∞–≤—Ç–æ—Ä–∏–∑–æ–≤–∞–Ω–Ω—ã—Ö –∫–ª—é—á–µ–π —Å–µ—Ä–≤–µ—Ä–∞

* –í–≤–æ–¥ SSH-–∫–ª—é—á–∞ –∏–∑ —Å–µ—Ä–≤–µ—Ä–∞ –≤ —Å–ø–∏—Å–æ–∫ –∞–≤—Ç–æ—Ä–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω—ã—Ö –∫–ª—é—á–µ–π:

```bash
ssh-keygen -y -f ~/.ssh/id_ed25519 >> ~/.ssh/authorized_keys
```

* –í–≤–æ–¥ SSH-–∫–ª—é—á–∞ –∏–∑ –ª–æ–∫–∞–ª—å–Ω–æ–≥–æ –ü–ö –≤ —Å–ø–∏—Å–æ–∫ –∞–≤—Ç–æ—Ä–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω—ã—Ö –∫–ª—é—á–µ–π:

```bash
echo "ssh-ed25519 AAAA...jU max.t95@bk.ru" >> ~/.ssh/authorized_keys
```

* –ü—Ä–æ—Å–º–æ—Ç—Ä —Å–ø–∏—Å–∫–∞ –∞–≤—Ç–æ—Ä–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω—ã—Ö –∫–ª—é—á–µ–π:

```bash
cat ~/.ssh/authorized_keys
```

```bash
# –í –∏—Ç–æ–≥–µ –¥–æ–ª–∂–Ω–æ –±—ã—Ç—å –¥–≤–∞ SSH-–∫–ª—é—á–∞ –≤ —Å–ø–∏—Å–∫–µ –∞–≤—Ç–æ—Ä–∏–∑–æ–≤–∞–Ω–Ω—ã—Ö –∫–ª—é—á–µ–π
ssh-ed25519 AAAA...rx max.t95@bk.ru
ssh-ed25519 AAAA...jU max.t95@bk.ru
```

<img src="./demo/5-ci-cd/3-authorized-keys-list.png" width="100%">

### 5.4. –ù–∞—Å—Ç—Ä–æ–π–∫–∞ sudo –±–µ–∑ –ø–∞—Ä–æ–ª—è –¥–ª—è CI/CD


* –ù–∞—Å—Ç—Ä–æ–π–∫–∞ –ø—Ä–∞–≤ –¥–ª—è authorized_keys:

```bash
chmod 600 ~/.ssh/authorized_keys
chmod 700 ~/.ssh
```


* –í—Ö–æ–¥ –≤ visudo –∏ –¥–æ–±–∞–≤–ª–µ–Ω–∏–µ –ø–∞—Ä–∞–º–µ—Ç—Ä–æ–≤ –¥–ª—è –æ–±—Ö–æ–¥–∞ –ø–∞—Ä–æ–ª–µ–π –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è –ø—Ä–∏ –¥–µ–ø–ª–æ–µ:  

```bash
sudo visudo
```

```bash
# –î–æ–±–∞–≤–ª—è–µ–º –≤ –∫–æ–Ω—Ü–µ —Ñ–∞–π–ª–∞ —Å–ª–µ–¥—É—é—â–µ–µ:
myclouduser ALL=(ALL) NOPASSWD: ALL
```

* –í—ã—Ö–æ–¥ –∏–∑ —Å–µ—Ä–≤–µ—Ä–∞ –∏ –ø—Ä–æ–≤–µ—Ä–∫–∞ –≤—Ö–æ–¥–∞ –Ω–∞ —Å–µ—Ä–≤–µ—Ä –±–µ–∑ –ø–∞—Ä–æ–ª—è:

```bash
exit
ssh myclouduser@95.163.220.37
# –ï—Å–ª–∏ –≤—Å—ë –æ–∫ ‚Äî –≤–æ–π–¥—ë–º –±–µ–∑ –ø–∞—Ä–æ–ª—è
```

<img src="./demo/5-ci-cd/4-no-pass-setup.gif" width="100%">

### 5.5. –ü—Ä–∏–≤—è–∑–∫–∞ SSH-–∫–ª—é—á–∞ –∫ GitHub

* –í—ã–≤–æ–¥ –ø—É–±–ª–∏—á–Ω–æ–≥–æ SSH-–∫–ª—é—á–∞ –¥–ª—è –≤–∑–∞–∏–º–æ–¥–µ–π—Å—Ç–≤–∏—è —Å GitHub:

```bash
cat ~/.ssh/id_ed25519.pub
```

```bash
# –ö–æ–ø–∏—Ä—É–µ–º –≤—Å–µ, —á—Ç–æ –±—É–¥–µ—Ç –≤—ã–≤–µ–¥–µ–Ω–æ
ssh-ed25519 AAAA...rx max.t95@bk.ru
```

* –ù–∞—Å—Ç—Ä–æ–π–∫–∞ –ø—É–±–ª–∏—á–Ω–æ–≥–æ –∫–ª—é—á–∞ –∫ GitHub:

   * ```–°–∞–π—Ç GitHub``` ‚Üí ```Settings``` ‚Üí ```SSH and GPG keys``` ‚Üí ```New SSH key```. –ó–∞–ø–æ–ª–Ω—è–µ–º –ø–∞—Ä–∞–º–µ—Ç—Ä—ã SHH-–∫–ª—é—á–∞:

     * –¢–∏–ø –∫–ª—é—á–∞: ```Authentication Key``` 
  
     * –ò–º—è –∫–ª—é—á–∞: ```VM-server```

     * –í –ø–æ–ª–µ ```Key``` –¥–æ–±–∞–≤–ª—è–µ–º —Å–æ–¥–µ—Ä–∂–∏–º–æ–µ SSH-–∫–ª—é—á–∞. –ü—Ä–∏–º–µ—Ä - ```ssh-ed25519 AAAA...rx max.t95@bk.ru```

  * –ü–æ—Å–ª–µ –¥–æ–±–∞–≤–ª–µ–Ω–∏—è –ø–∞—Ä–∞–º–µ—Ç—Ä–æ–≤ SSH-–∫–ª—é—á–∞ –Ω–∞–∂–∏–º–∞–µ–º ```Add SSH key```

<img src="./demo/5-ci-cd/5-SSH-key-integration-with-github.png" width="100%">

### 5.6.–ù–∞—Å—Ç—Ä–æ–π–∫–∞ —Ñ–∞–π–ª–∞ SSH-–∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏. –ü—Ä–æ–≤–µ—Ä–∫–∞ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è –∫ GitHub

* –í–Ω–µ—Å–µ–Ω–∏–µ GitHub –≤ —Å–ø–∏—Å–æ–∫ –∏–∑–≤–µ—Å—Ç–Ω—ã—Ö —Ö–æ—Å—Ç–æ–≤ —Å–µ—Ä–≤–µ—Ä–∞:

```bash
ssh-keyscan -H github.com >> ~/.ssh/known_hosts
```

* –ù–∞—Å—Ç—Ä–æ–π–∫–∞ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏ –¥–ª—è SSH:

```bash
nano ~/.ssh/config
```

```
----- ~/.ssh/config -----
Host github.com
    HostName github.com
    User git
    IdentityFile ~/.ssh/id_ed25519
----- ~/.ssh/config -----
```

* –ó–∞–¥–∞–Ω–∏–µ –ø—Ä–∞–≤ –¥–ª—è —Ñ–∞–π–ª–∞ SSH-–∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏:

```bash
chmod 600 ~/.ssh/config
```

* –ü—Ä–æ–≤–µ—Ä–∫–∞ –≤–∑–∞–∏–º–æ–¥–µ–π—Å—Ç–≤–∏—è —Å GitHub:

```bash
ssh -T git@github.com
# –ï—Å–ª–∏ –≤—Å—ë –æ–∫ ‚Äî —É–≤–∏–¥–∏–º —ç—Ç–æ —Å–æ–æ–±—â–µ–Ω–∏–µ:
# Hi <–ª–æ–≥–∏–Ω>! You've successfully authenticated ...
```

<img src="./demo/5-ci-cd/6-github-integration-check.gif" width="100%">

### 5.7. –£—Å—Ç–∞–Ω–æ–≤–∫–∞ –∑–Ω–∞—á–µ–Ω–∏–π secret-–ø–∞—Ä–∞–º–µ—Ç—Ä–æ–≤ GitHub-—Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏—è –¥–ª—è –∞–≤—Ç–æ–¥–µ–ø–ª–æ—è

* –í–≤–æ–¥ –∫–æ–º–∞–Ω–¥—ã –Ω–∞ —Å–µ—Ä–≤–µ—Ä–µ –¥–ª—è –ø–æ–ª—É—á–µ–Ω–∏—è ```SSH_PRIVATE_KEY```:

```bash
cat ~/.ssh/id_ed25519
```

```bash
# –ö–æ–ø–∏—Ä—É–µ–º –≤—Å–µ –≤–º–µ—Å—Ç–µ —Å –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏—è–º–∏ BEGIN –∏ END
-----BEGIN OPENSSH PRIVATE KEY----- 
b3...= 
-----END OPENSSH PRIVATE KEY-----
```

* –í–≤–æ–¥ secrets –¥–ª—è –∞–≤—Ç–æ–¥–µ–ø–ª–æ—è GitHub-—Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏—è:

  * SSH_HOST: ```95.163.220.37``` (–∏–ª–∏ –¥—Ä—É–≥–æ–π IP-–∞–¥—Ä–µ—Å —Å–µ—Ä–≤–µ—Ä–∞)

  * SSH_USER: ```myclouduser```

  * SSH_PRIVATE_KEY: —Ä–µ–∑—É–ª—å—Ç–∞—Ç –∫–æ–º–∞–Ω–¥—ã ```cat ~/.ssh/id_ed25519``` –Ω–∞ —Å–µ—Ä–≤–µ—Ä–µ

<img src="./demo/5-ci-cd/7-1-secrets.png" width="100%">

* –ü–æ—Å–ª–µ —É—Å—Ç–∞–Ω–æ–≤–∫–∏ secrets –ø—Ä–æ–≤–µ—Ä—è–µ–º —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª –∞–≤—Ç–æ–¥–µ–ø–ª–æ—è

<img src="./demo/5-ci-cd/7-2-auto-deploy.gif" width="100%">
